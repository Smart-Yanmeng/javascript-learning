<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../lib/d3.v7.min.js"></script>
    <script src="../lib/topojson.js"></script>
</head>
<body>
<svg width="1600" height="800" id="mainSvg" class="svgs"></svg>

<script>
    let svg = d3.select("svg");

    const width = +svg.attr("width");
    const height = +svg.attr("height");
    const margin = {top: 60, right: 60, bottom: 10, left: 60};
    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;

    const g = svg.append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`)
        .attr('id', 'mainGroup');

    const projection = d3.geoNaturalEarth1();
    const pathGenerator = d3.geoPath().projection(projection);

    d3.json('/countries-100m').then(data => {
        let world = topojson.feature(data, data.objects.countries);

        projection.fitSize([innerWidth, innerHeight], world);

        const paths = g.selectAll('path')
            .data(world.features, d => d.properties.name).join('path')
            .attr('d', pathGenerator)
            .attr('stroke', 'black')
            .attr('stroke-width', 1);

        console.log(world);
    })
</script>
</body>
</html>